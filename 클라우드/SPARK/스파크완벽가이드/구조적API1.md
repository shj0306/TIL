# 구조적 API

- 비정형 로그 파일부터 반정형 csv 파일, 정형적인 파케이 파일까지 다양한 유형의 데이터를 처리 할 수 있다.

### 구조적 API 종류

- DataSet
- DataFrame
- SQL 테이블과 뷰

### DataFrame과 DataSet

- 데이터프레임과 데이터셋은 잘 정의된 로우와 컬럼을 갖는 분산 테이블 형태의 컬렉션이다.

### 스키마(Schema)

- 스키마는 데이터프레임의 컬럼명과 데이터 타입을 정의한다.

### DataFrame과 DataSet 비교

- 데이터프레임은 비타입형, 데이터셋은 타입형
- 데이터프레임은 스키마에 명시되노 데이터 타입의 일치 여부를 **런타임**에서 확인하지만, 데이터셋은 일치 여부를 **컴파일 타임**에서 확인한다.
- 데이터셋은 스칼라와 자바에서만 지원한다.
- 데이터셋의 데이터 타입을 정의하려면 스칼라의 case class나 자바 빈을 사용해야 한다.

## 구조적 API 실행과정

1. DataFrame/DataSet/SQL을 이용해 코드 작성
2. 정상적인 코드면 스파크가 논리적 실행 계획으로 변환한다.
3. 스파크는 논리적 실행 계획을 물리적 실행 계획으로 변환하며 그 과정에서 추가적인 최적화를 할 수 있는 지 확인한다.
4. 스파크는 클러스터에서 물리적 실행계획(RDD 처리)을 실행한다.

